basePath: /api/v1
definitions:
  domain.AuthResponse:
    properties:
      token:
        type: string
      user:
        $ref: '#/definitions/domain.User'
    type: object
  domain.Company:
    properties:
      children:
        items:
          $ref: '#/definitions/domain.Company'
        type: array
      code:
        description: Unique company code
        type: string
      created_at:
        type: string
      description:
        description: Optional description
        type: string
      id:
        type: string
      is_active:
        type: boolean
      level:
        description: 0=root, 1=holding, 2=subsidiary, 3=sub-subsidiary, etc
        type: integer
      name:
        type: string
      parent:
        allOf:
        - $ref: '#/definitions/domain.Company'
        description: Relationships (populated on query)
      parent_id:
        description: NULL untuk root/holding company
        type: string
      updated_at:
        type: string
      users:
        items:
          $ref: '#/definitions/domain.User'
        type: array
    type: object
  domain.CompanyModel:
    properties:
      code:
        description: Unique company code
        type: string
      created_at:
        type: string
      description:
        type: string
      id:
        type: string
      is_active:
        type: boolean
      level:
        description: 0=root, 1=holding, 2=subsidiary, etc
        type: integer
      name:
        type: string
      parent_id:
        description: NULL untuk root/holding company
        type: string
      updated_at:
        type: string
    type: object
  domain.Document:
    properties:
      content:
        type: string
      created_at:
        type: string
      description:
        type: string
      id:
        type: string
      title:
        type: string
      updated_at:
        type: string
    type: object
  domain.ErrorResponse:
    properties:
      error:
        type: string
      message:
        type: string
    type: object
  domain.LoginRequest:
    properties:
      code:
        description: Kode 2FA (opsional)
        example: "123456"
        type: string
      password:
        example: password123
        minLength: 8
        type: string
      username:
        description: Bisa username atau email
        example: admin
        minLength: 3
        type: string
    required:
    - password
    - username
    type: object
  domain.Permission:
    properties:
      action:
        description: e.g., "view", "create", "update", "delete"
        type: string
      created_at:
        type: string
      description:
        description: Human-readable description
        type: string
      id:
        type: string
      name:
        description: e.g., "view_dashboard", "manage_users"
        type: string
      resource:
        description: e.g., "dashboard", "users", "documents"
        type: string
      scope:
        allOf:
        - $ref: '#/definitions/domain.PermissionScope'
        description: global, company, sub_company
      updated_at:
        type: string
    type: object
  domain.PermissionModel:
    properties:
      action:
        type: string
      created_at:
        type: string
      description:
        type: string
      id:
        type: string
      name:
        type: string
      resource:
        type: string
      scope:
        $ref: '#/definitions/domain.PermissionScope'
      updated_at:
        type: string
    type: object
  domain.PermissionScope:
    enum:
    - global
    - company
    - sub_company
    type: string
    x-enum-comments:
      ScopeCompany: Company-level access
      ScopeGlobal: Superadmin only
      ScopeSubCompany: Sub-company level access
    x-enum-descriptions:
    - Superadmin only
    - Company-level access
    - Sub-company level access
    x-enum-varnames:
    - ScopeGlobal
    - ScopeCompany
    - ScopeSubCompany
  domain.Role:
    properties:
      created_at:
        type: string
      description:
        description: Human-readable description
        type: string
      id:
        type: string
      is_system:
        description: System role tidak bisa dihapus
        type: boolean
      level:
        description: 0=superadmin, 1=admin, 2=manager, 3=staff
        type: integer
      name:
        description: e.g., "superadmin", "admin", "manager", "staff"
        type: string
      permissions:
        description: Relationships
        items:
          $ref: '#/definitions/domain.Permission'
        type: array
      updated_at:
        type: string
      users:
        items:
          $ref: '#/definitions/domain.User'
        type: array
    type: object
  domain.RoleModel:
    properties:
      created_at:
        type: string
      description:
        type: string
      id:
        type: string
      is_system:
        description: System role tidak bisa dihapus
        type: boolean
      level:
        description: 0=superadmin, 1=admin, 2=manager, 3=staff
        type: integer
      name:
        type: string
      updated_at:
        type: string
    type: object
  domain.User:
    properties:
      company:
        allOf:
        - $ref: '#/definitions/domain.Company'
        description: Relationships (populated on query)
      company_id:
        description: NULL untuk superadmin, required untuk user lain
        type: string
      created_at:
        type: string
      email:
        type: string
      id:
        type: string
      is_active:
        type: boolean
      role:
        description: Legacy field, akan deprecated
        type: string
      role_detail:
        $ref: '#/definitions/domain.Role'
      role_id:
        description: Reference ke Role table
        type: string
      updated_at:
        type: string
      username:
        type: string
    type: object
  domain.UserModel:
    properties:
      company_id:
        description: NULL untuk superadmin
        type: string
      created_at:
        type: string
      email:
        type: string
      id:
        type: string
      is_active:
        type: boolean
      role:
        description: Legacy field, akan deprecated
        type: string
      role_id:
        description: Reference ke Role table
        type: string
      updated_at:
        type: string
      username:
        type: string
    type: object
  main.AuthResponse:
    properties:
      token:
        type: string
      user:
        $ref: '#/definitions/main.User'
    type: object
  main.Document:
    properties:
      content:
        type: string
      created_at:
        type: string
      description:
        type: string
      id:
        type: string
      title:
        type: string
      updated_at:
        type: string
    type: object
  main.ErrorResponse:
    properties:
      error:
        type: string
      message:
        type: string
    type: object
  main.LoginRequest:
    properties:
      code:
        description: Kode 2FA (opsional)
        example: "123456"
        type: string
      password:
        example: password123
        type: string
      username:
        description: Bisa username atau email
        example: admin
        type: string
    type: object
  main.User:
    properties:
      created_at:
        type: string
      email:
        type: string
      id:
        type: string
      role:
        type: string
      updated_at:
        type: string
      username:
        type: string
    type: object
host: localhost:8080
info:
  contact:
    email: support@swagger.io
    name: API Support
    url: http://www.swagger.io/support
  description: Pedeve App Backend API dengan struktur Clean Architecture
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: Pedeve App Backend API
  version: "1.0"
paths:
  /:
    get:
      consumes:
      - application/json
      description: Returns API information
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Root endpoint
      tags:
      - General
  /api/v1:
    get:
      consumes:
      - application/json
      description: Returns API version and endpoints
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      summary: API Information
      tags:
      - General
  /api/v1/audit-logs:
    get:
      consumes:
      - application/json
      description: Mengambil audit logs dengan pagination dan filter. User reguler
        hanya bisa melihat audit logs mereka sendiri, sedangkan admin/superadmin bisa
        melihat semua audit logs. Endpoint ini tidak memerlukan CSRF token karena
        menggunakan method GET (read-only).
      parameters:
      - description: 'Nomor halaman (default: 1)'
        in: query
        name: page
        type: integer
      - description: 'Jumlah item per halaman (default: 10, maksimal: 100)'
        in: query
        name: pageSize
        type: integer
      - description: 'Filter berdasarkan action (contoh: login, logout, create_document)'
        in: query
        name: action
        type: string
      - description: 'Filter berdasarkan resource (contoh: auth, document, user)'
        in: query
        name: resource
        type: string
      - description: Filter berdasarkan status (success, failure, error)
        in: query
        name: status
        type: string
      - description: Filter berdasarkan tipe log (user_action atau technical_error)
        in: query
        name: logType
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Audit logs berhasil diambil. Response berisi data (array audit
            logs), total, page, pageSize, dan totalPages
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Token tidak valid atau user tidak terautentikasi
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: User tidak ditemukan di database
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Gagal mengambil audit logs
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Ambil Audit Logs
      tags:
      - Audit
  /api/v1/audit-logs/stats:
    get:
      consumes:
      - application/json
      description: Mengambil statistik tentang audit logs termasuk total records,
        jumlah berdasarkan tipe, estimasi ukuran database, dan retention policy. Endpoint
        ini tidak memerlukan CSRF token karena menggunakan method GET (read-only).
      produces:
      - application/json
      responses:
        "200":
          description: Statistik audit logs berhasil diambil. Response berisi total_records,
            user_action_count, technical_error_count, estimated_size_mb, retention_policy
            (user_action_days, technical_error_days), dll
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Token tidak valid atau user tidak terautentikasi
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Gagal mengambil statistik audit logs
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Ambil Statistik Audit Logs
      tags:
      - Audit
  /api/v1/auth/2fa/disable:
    post:
      consumes:
      - application/json
      description: Menonaktifkan 2FA untuk user yang sedang terautentikasi. Setelah
        2FA dinonaktifkan, user tidak perlu memasukkan kode 2FA saat login. Endpoint
        ini memerlukan authentication dan CSRF token.
      produces:
      - application/json
      responses:
        "200":
          description: '2FA berhasil dinonaktifkan. Response berisi message: ''2FA
            has been disabled successfully'''
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Token tidak valid atau user tidak terautentikasi
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: CSRF token tidak valid atau tidak ditemukan
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: 2FA tidak aktif untuk user ini (2fa_not_found)
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Gagal menonaktifkan 2FA
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Nonaktifkan 2FA
      tags:
      - Authentication
  /api/v1/auth/2fa/generate:
    post:
      consumes:
      - application/json
      description: Menghasilkan secret TOTP baru dan QR code untuk setup 2FA. Secret
        ini digunakan untuk generate kode 2FA di authenticator app (Google Authenticator,
        Authy, dll). Endpoint ini memerlukan authentication dan CSRF token.
      produces:
      - application/json
      responses:
        "200":
          description: Secret 2FA berhasil di-generate. Response berisi secret, qr_code
            (base64 image), url (untuk manual entry), dan message
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Token tidak valid atau user tidak terautentikasi
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: CSRF token tidak valid atau tidak ditemukan
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Gagal generate secret 2FA
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Generate Secret 2FA
      tags:
      - Authentication
  /api/v1/auth/2fa/status:
    get:
      consumes:
      - application/json
      description: Mengambil status 2FA untuk user yang sedang terautentikasi. Endpoint
        ini tidak memerlukan CSRF token karena menggunakan method GET (read-only).
      produces:
      - application/json
      responses:
        "200":
          description: 'Status 2FA berhasil diambil. Response berisi enabled: true/false'
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Token tidak valid atau user tidak terautentikasi
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Gagal mengambil status 2FA
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Cek Status 2FA
      tags:
      - Authentication
  /api/v1/auth/2fa/verify:
    post:
      consumes:
      - application/json
      description: Memverifikasi kode TOTP dari authenticator app dan mengaktifkan
        2FA untuk user. Setelah verifikasi berhasil, 2FA akan diaktifkan dan backup
        codes akan di-generate. Endpoint ini memerlukan authentication dan CSRF token.
      parameters:
      - description: Kode TOTP 6 digit dari authenticator app
        in: body
        name: code
        required: true
        schema:
          additionalProperties:
            type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: '2FA berhasil diaktifkan. Response berisi message, backup_codes
            (array string), dan enabled: true'
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Request body tidak valid atau secret 2FA tidak ditemukan
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Token tidak valid, user tidak terautentikasi, atau kode verifikasi
            tidak valid
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: CSRF token tidak valid atau tidak ditemukan
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Verifikasi dan Aktifkan 2FA
      tags:
      - Authentication
  /api/v1/auth/login:
    post:
      consumes:
      - application/json
      description: Autentikasi user dan kembalikan JWT token. Mendukung login dengan
        username atau email. Jika 2FA aktif, akan memerlukan kode verifikasi tambahan
        pada request berikutnya.
      parameters:
      - description: 'Kredensial login (username/email, password, dan opsional: code
          untuk 2FA)'
        in: body
        name: credentials
        required: true
        schema:
          $ref: '#/definitions/domain.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: '2FA diperlukan. Response berisi requires_2fa: true. Kirim
            kode 2FA pada request login berikutnya dengan field ''code''.'
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Request body tidak valid atau validation error (username/password
            tidak memenuhi syarat)
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Kredensial tidak valid atau kode 2FA salah
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "429":
          description: Terlalu banyak request, rate limit terlampaui (5 req/min untuk
            auth endpoints)
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      summary: Login User
      tags:
      - Authentication
  /api/v1/auth/logout:
    post:
      consumes:
      - application/json
      description: Logout user dan hapus authentication cookie (auth_token). Aksi
        logout dicatat dalam audit log untuk keamanan dan audit trail. Endpoint ini
        memerlukan CSRF token karena menggunakan method POST.
      produces:
      - application/json
      responses:
        "200":
          description: 'Logout berhasil. Response berisi message: ''Logged out successfully''.
            Cookie auth_token akan dihapus.'
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Token tidak valid atau user tidak terautentikasi
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: CSRF token tidak valid atau tidak ditemukan
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Logout User
      tags:
      - Authentication
  /api/v1/auth/profile:
    get:
      consumes:
      - application/json
      description: Mengambil profil user yang sedang terautentikasi. Data user diambil
        dari JWT token yang tersimpan dalam httpOnly cookie. Endpoint ini tidak memerlukan
        CSRF token karena menggunakan method GET (read-only).
      produces:
      - application/json
      responses:
        "200":
          description: Profil user berhasil diambil. Response berisi id, username,
            email, role, created_at, dan updated_at (tanpa informasi password)
          schema:
            $ref: '#/definitions/domain.User'
        "401":
          description: Token tidak valid atau expired, user tidak terautentikasi
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: User tidak ditemukan di database
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Ambil Profil User
      tags:
      - Authentication
  /api/v1/companies:
    get:
      consumes:
      - application/json
      description: Mengambil daftar semua companies. Superadmin melihat semua. User
        lain hanya melihat company mereka dan descendants.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.CompanyModel'
            type: array
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Ambil Semua Companies
      tags:
      - Company Management
    post:
      consumes:
      - application/json
      description: Membuat company baru dalam hierarchy. Superadmin bisa membuat company
        di level manapun. Admin company hanya bisa membuat sub-company di bawah company
        mereka.
      parameters:
      - description: Company data (name, code, description, parent_id optional)
        in: body
        name: company
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.CompanyModel'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Buat Company Baru
      tags:
      - Company Management
  /api/v1/companies/{id}:
    delete:
      consumes:
      - application/json
      description: 'Menghapus company (soft delete: set is_active=false). Hanya bisa
        delete company sendiri atau descendants.'
      parameters:
      - description: Company ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Hapus Company
      tags:
      - Company Management
    get:
      consumes:
      - application/json
      description: Mengambil informasi company berdasarkan ID. User hanya bisa mengakses
        company mereka atau descendants.
      parameters:
      - description: Company ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.CompanyModel'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Ambil Company by ID
      tags:
      - Company Management
    put:
      consumes:
      - application/json
      description: Mengupdate informasi company. Hanya bisa update company sendiri
        atau descendants.
      parameters:
      - description: Company ID
        in: path
        name: id
        required: true
        type: string
      - description: Company data to update
        in: body
        name: company
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.CompanyModel'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update Company
      tags:
      - Company Management
  /api/v1/companies/{id}/children:
    get:
      consumes:
      - application/json
      description: Mengambil daftar children (sub-companies) dari company tertentu.
      parameters:
      - description: Company ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.CompanyModel'
            type: array
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Ambil Children Company
      tags:
      - Company Management
  /api/v1/csrf-token:
    get:
      consumes:
      - application/json
      description: Mengambil token CSRF baru untuk digunakan pada request yang mengubah
        state (POST, PUT, DELETE, PATCH). Token CSRF juga disimpan dalam cookie (csrf_token)
        untuk double-submit cookie pattern. Endpoint ini public dan tidak memerlukan
        authentication.
      produces:
      - application/json
      responses:
        "200":
          description: Token CSRF berhasil diambil. Response berisi csrf_token. Token
            juga disimpan dalam cookie csrf_token.
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Gagal generate token CSRF
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      summary: Ambil Token CSRF
      tags:
      - Security
  /api/v1/documents:
    get:
      consumes:
      - application/json
      description: Returns a list of all documents (requires authentication)
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/main.Document'
            type: array
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/main.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get all documents
      tags:
      - Documents
    post:
      consumes:
      - application/json
      description: Creates a new document (requires authentication)
      parameters:
      - description: Document object
        in: body
        name: document
        required: true
        schema:
          $ref: '#/definitions/main.Document'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/main.Document'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/main.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/main.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create document
      tags:
      - Documents
  /api/v1/documents/{id}:
    delete:
      consumes:
      - application/json
      description: Deletes a document by ID (requires authentication)
      parameters:
      - description: Document ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/main.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/main.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete document
      tags:
      - Documents
    get:
      consumes:
      - application/json
      description: Returns a single document by ID (requires authentication)
      parameters:
      - description: Document ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/main.Document'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/main.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/main.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get document by ID
      tags:
      - Documents
    put:
      consumes:
      - application/json
      description: Updates an existing document (requires authentication)
      parameters:
      - description: Document ID
        in: path
        name: id
        required: true
        type: string
      - description: Document object
        in: body
        name: document
        required: true
        schema:
          $ref: '#/definitions/main.Document'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/main.Document'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/main.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/main.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update document
      tags:
      - Documents
  /api/v1/permissions:
    get:
      consumes:
      - application/json
      description: Mengambil daftar semua permissions. Bisa difilter berdasarkan resource
        atau scope.
      parameters:
      - description: Filter by resource
        in: query
        name: resource
        type: string
      - description: Filter by scope (global, company, sub_company)
        in: query
        name: scope
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.PermissionModel'
            type: array
      security:
      - BearerAuth: []
      summary: Ambil Semua Permissions
      tags:
      - Permission Management
    post:
      consumes:
      - application/json
      description: Membuat permission baru. Hanya superadmin yang bisa membuat permission.
      parameters:
      - description: Permission data
        in: body
        name: permission
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.PermissionModel'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Buat Permission Baru
      tags:
      - Permission Management
  /api/v1/permissions/{id}:
    delete:
      consumes:
      - application/json
      description: Menghapus permission.
      parameters:
      - description: Permission ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Hapus Permission
      tags:
      - Permission Management
    get:
      consumes:
      - application/json
      description: Mengambil informasi permission berdasarkan ID.
      parameters:
      - description: Permission ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.PermissionModel'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Ambil Permission by ID
      tags:
      - Permission Management
    put:
      consumes:
      - application/json
      description: Mengupdate informasi permission.
      parameters:
      - description: Permission ID
        in: path
        name: id
        required: true
        type: string
      - description: Permission data to update
        in: body
        name: permission
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.PermissionModel'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update Permission
      tags:
      - Permission Management
  /api/v1/roles:
    get:
      consumes:
      - application/json
      description: Mengambil daftar semua roles.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.RoleModel'
            type: array
      security:
      - BearerAuth: []
      summary: Ambil Semua Roles
      tags:
      - Role Management
    post:
      consumes:
      - application/json
      description: Membuat role baru. Hanya superadmin yang bisa membuat role.
      parameters:
      - description: Role data
        in: body
        name: role
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.RoleModel'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Buat Role Baru
      tags:
      - Role Management
  /api/v1/roles/{id}:
    delete:
      consumes:
      - application/json
      description: Menghapus role. System roles tidak bisa dihapus.
      parameters:
      - description: Role ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Hapus Role
      tags:
      - Role Management
    get:
      consumes:
      - application/json
      description: Mengambil informasi role berdasarkan ID.
      parameters:
      - description: Role ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.RoleModel'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Ambil Role by ID
      tags:
      - Role Management
    put:
      consumes:
      - application/json
      description: Mengupdate informasi role. System roles tidak bisa diupdate.
      parameters:
      - description: Role ID
        in: path
        name: id
        required: true
        type: string
      - description: Role data to update
        in: body
        name: role
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.RoleModel'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update Role
      tags:
      - Role Management
  /api/v1/roles/{id}/permissions:
    delete:
      consumes:
      - application/json
      description: Menghapus permission dari role.
      parameters:
      - description: Role ID
        in: path
        name: id
        required: true
        type: string
      - description: Permission ID
        in: body
        name: permission_id
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Revoke Permission dari Role
      tags:
      - Role Management
    get:
      consumes:
      - application/json
      description: Mengambil daftar permissions yang dimiliki oleh role.
      parameters:
      - description: Role ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.PermissionModel'
            type: array
      security:
      - BearerAuth: []
      summary: Ambil Permissions Role
      tags:
      - Role Management
    post:
      consumes:
      - application/json
      description: Menambahkan permission ke role.
      parameters:
      - description: Role ID
        in: path
        name: id
        required: true
        type: string
      - description: Permission ID
        in: body
        name: permission_id
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Assign Permission ke Role
      tags:
      - Role Management
  /api/v1/users:
    get:
      consumes:
      - application/json
      description: Mengambil daftar semua users. Filtered berdasarkan company access.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.UserModel'
            type: array
      security:
      - BearerAuth: []
      summary: Ambil Semua Users
      tags:
      - User Management
    post:
      consumes:
      - application/json
      description: Membuat user baru. Admin hanya bisa membuat user di company mereka
        atau descendants. Superadmin role tidak bisa dibuat dari antarmuka ini.
      parameters:
      - description: User data
        in: body
        name: user
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.UserModel'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Buat User Baru
      tags:
      - User Management
  /api/v1/users/{id}:
    delete:
      consumes:
      - application/json
      description: Menghapus user. Superadmin tidak bisa menghapus dirinya sendiri
        atau user superadmin lainnya.
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Hapus User
      tags:
      - User Management
    get:
      consumes:
      - application/json
      description: Mengambil informasi user berdasarkan ID.
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.UserModel'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Ambil User by ID
      tags:
      - User Management
    put:
      consumes:
      - application/json
      description: Mengupdate informasi user. Superadmin tidak bisa mengedit dirinya
        sendiri.
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      - description: User data to update
        in: body
        name: user
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.UserModel'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update User
      tags:
      - User Management
  /health:
    get:
      consumes:
      - application/json
      description: Returns health status
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Health check
      tags:
      - General
securityDefinitions:
  BearerAuth:
    description: Type "Bearer" followed by a space and JWT token. Atau menggunakan
      httpOnly cookie (auth_token) untuk keamanan yang lebih baik.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
